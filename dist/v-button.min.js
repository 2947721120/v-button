/**
 * vButton - AngularJS pressable button with a busy indicator
 * @version v0.0.3
 * @link http://lukaszwatroba.github.io/v-button
 * @author Łukasz Wątroba <l@lukaszwatroba.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(e){"use strict";function t(t,s){return{restrict:"A",scope:{isBusy:"=busy",busyLabel:"@busyLabel"},compile:function(n,o){var l=s.classes.buttonLabel,u=e.element(t[0].body),i=e.element(n[0].querySelector("."+l));if(e.isDefined(o.busy)&&n.addClass(s.classes.buttonBusyModifier),!i[0]){var a=n.html();n.html('<span class="'+l+'">'+a+"</span>"),i=e.element(n[0].querySelector("."+l))}return n.addClass(s.classes.buttonPressableModifier),function(n,o){function l(n,l){var u,i,a=o[0].getBoundingClientRect(),c=o[0].querySelector("."+s.classes.ripple);e.element(c).remove(),c=t[0].createElement("span"),c.className=s.classes.ripple,c.style.height=c.style.width=Math.max(a.width,a.height)+"px",o.append(c),i=n-a.left-c.offsetWidth/2-t[0].body.scrollLeft,u=l-a.top-c.offsetHeight/2-t[0].body.scrollTop,c.style.left=i+"px",c.style.top=u+"px"}function a(e){l(e.pageX,e.pageY),o.addClass(s.classes.isPressedState),u.bind(b,c)}function c(){o.removeClass(s.classes.isPressedState),u.unbind(b,c)}var r=!("undefined"==typeof t[0].documentElement.ontouchstart),d=r?"touchstart":"mousedown",b=r?"touchend":"mouseup",f=i.html(),p=n.busyLabel||s.busyLabel;o.bind(d,a),n.$watch("isBusy",function(e){e?(o.addClass(s.classes.isBusyState),i.html(p)):(o.removeClass(s.classes.isBusyState),i.html(f))})}}}}e.module("vButton.config",[]).constant("buttonConfig",{busyLabel:"Loading",classes:{buttonPressableModifier:"Button--pressable",buttonBusyModifier:"Button--busy",buttonLabel:"Button-label",ripple:"Ripple",isBusyState:"is-busy",isPressedState:"is-pressed"}}),e.module("vButton.directives",[]),e.module("vButton",["vButton.config","vButton.directives"]),e.module("vButton.directives").directive("vButton",t),t.$inject=["$document","buttonConfig"]}(angular);