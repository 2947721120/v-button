/**
 * vButton - AngularJS pressable button with a busy indicator
 * @version v0.1.0
 * @link http://lukaszwatroba.github.io/v-button
 * @author Łukasz Wątroba <l@lukaszwatroba.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(e){"use strict";function t(t,s){return{restrict:"A",scope:{isBusy:"=vBusy",busyLabel:"@vBusyLabel"},compile:function(t){var n=e.element(t.find("span"));return n[0]||(t.html("<span>"+t.html()+"</span>"),n=e.element(t.find("span"))),function(e,t){var i=n.html(),o=e.busyLabel||s.busyLabel;e.$watch("isBusy",function(e){e?(t.addClass(s.classes.isBusyState),n.html(o)):(t.removeClass(s.classes.isBusyState),n.html(i))})}}}}function s(t,s){return{restrict:"A",link:function(n,i){function o(n,o){var u,l,a=i[0].getBoundingClientRect(),c=i[0].querySelector("."+s.classes.ripple);e.element(c).remove(),c=t[0].createElement("span"),c.className=s.classes.ripple,c.style.height=c.style.width=Math.max(a.width,a.height)+"px",i.append(c),l=n-a.left-c.offsetWidth/2-d[0].scrollLeft,u=o-a.top-c.offsetHeight/2-d[0].scrollTop,c.style.left=l+"px",c.style.top=u+"px"}function u(e){o(e.pageX,e.pageY),i.addClass(s.classes.isPressedState),d.bind(r,l)}function l(){i.removeClass(s.classes.isPressedState),d.unbind(r,l)}var a=!("undefined"==typeof t[0].documentElement.ontouchstart),c=a?"touchstart":"mousedown",r=a?"touchend":"mouseup",d=e.element(t[0].body);i.bind(c,u)}}}e.module("vButton.config",[]).constant("buttonConfig",{busyLabel:"Loading",classes:{ripple:"Ripple",isBusyState:"is-busy",isPressedState:"is-pressed"}}),e.module("vButton.directives",[]),e.module("vButton",["vButton.config","vButton.directives"]),e.module("vButton.directives").directive("vBusy",t),t.$inject=["$document","buttonConfig"],e.module("vButton.directives").directive("vPressable",s),s.$inject=["$document","buttonConfig"]}(angular);