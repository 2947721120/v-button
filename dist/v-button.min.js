/**
 * vButton - AngularJS pressable button with a busy indicator
 * @version v0.0.2
 * @link http://lukaszwatroba.github.io/v-button
 * @author Łukasz Wątroba <l@lukaszwatroba.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

!function(e){"use strict";function t(t,s){return{restrict:"A",scope:{isBusy:"=busy",busyLabel:"@busyLabel"},compile:function(o,n){var l=s.classes.buttonLabel,u=e.element(t[0].body),i=e.element(o[0].querySelector("."+l));if(e.isDefined(n.busy)&&o.addClass(s.classes.buttonBusyModifier),!i[0]){var a=o.html();o.html('<span class="'+l+'">'+a+"</span>"),i=e.element(o[0].querySelector("."+l))}return o.addClass(s.classes.buttonPressableModifier),function(o,n){function l(o,l){var u,i,a=n[0].getBoundingClientRect(),c=n[0].querySelector("."+s.classes.ripple);e.element(c).remove(),c=t[0].createElement("span"),c.className=s.classes.ripple,c.style.height=c.style.width=Math.max(a.width,a.height)+"px",n.append(c),i=o-a.left-c.offsetWidth/2-t[0].body.scrollLeft,u=l-a.top-c.offsetHeight/2-t[0].body.scrollTop,c.style.left=i+"px",c.style.top=u+"px"}var a=i.html(),c=o.busyLabel||s.busyLabel;n.bind("mousedown touchstart",function(e){l(e.pageX,e.pageY),n.addClass(s.classes.isPressedState),u.bind("mouseup touchend",function(){n.removeClass(s.classes.isPressedState),u.unbind("mouseup touchend")})}),o.$watch("isBusy",function(e){e?(n.addClass(s.classes.isBusyState),i.html(c)):(n.removeClass(s.classes.isBusyState),i.html(a))})}}}}e.module("vButton.config",[]).constant("buttonConfig",{busyLabel:"Loading",classes:{buttonPressableModifier:"Button--pressable",buttonBusyModifier:"Button--busy",buttonLabel:"Button-label",ripple:"Ripple",isBusyState:"is-busy",isPressedState:"is-pressed"}}),e.module("vButton.directives",[]),e.module("vButton",["vButton.config","vButton.directives"]),e.module("vButton.directives").directive("vButton",t),t.$inject=["$document","buttonConfig"]}(angular);